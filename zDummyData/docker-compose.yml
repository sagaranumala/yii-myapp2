# version: '3.8'

# services:
#   web:
#     image: php:7.4-apache
#     container_name: yii-app
#     ports:
#       - "8080:80"
#     volumes:
#       - /c/xampp/htdocs/myapp2:/var/www/html
#       - /c/xampp/htdocs/yii-1.1.18.018a89:/var/www/yii
#     environment:
#       APP_ENV: dev
#       DB_HOST: host.docker.internal
#       DB_NAME: ticketdb
#       DB_USER: root
#       DB_PASS: Sagar@194
#     command: >
#        bash -c "docker-php-ext-install pdo pdo_mysql mysqli &&
#        a2enmod rewrite &&
#        apache2-foreground"

# services:
#   web:
    # build: .
    # container_name: yii-app
    # ports:
    #   - "8080:80"
    # volumes:
    #   - /c/xampp/htdocs/myapp2:/var/www/html
    #   - /c/xampp/htdocs/yii-1.1.18.018a89:/var/www/yii
    # environment:
    #   APP_ENV: dev
    #   DB_HOST: host.docker.internal
    #   DB_NAME: ticketdb
    #   DB_USER: root
    #   DB_PASS: Sagar@194
    # command: >
    #   bash -c "docker-php-ext-install pdo pdo_mysql mysqli &&
    #   a2enmod rewrite &&
    #   apache2-foreground"


  # db:
  #   image: mysql:5.7
  #   container_name: yii-db
  #   environment:
  #     MYSQL_ROOT_PASSWORD: root
  #     MYSQL_DATABASE: ticketdb
  #     MYSQL_USER: yii_user
  #     MYSQL_PASSWORD: yii_pass
  #   ports:
  #     - "3307:3306"



version: '3.8'

services:
  web:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: yii-app
    ports:
      - "8080:80"
    volumes:
      - /c/xampp/htdocs/myapp2:/var/www/html
      - /c/xampp/htdocs/yii-1.1.18.018a89:/var/www/yii
    environment:
      APP_ENV: dev
      YII_DEBUG: "true"
      YII_TRACE_LEVEL: "3"
      DB_HOST: host.docker.internal
      DB_NAME: ticketdb
      DB_USER: root
      DB_PASS: Sagar@194
      JWT_SECRET: your-super-secret-jwt-key-for-docker-2024-change-this
      PHP_TIMEZONE: Asia/Kolkata
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
    networks:
      - yii-network

  # Optional: If you want MySQL in Docker instead of XAMPP
  # mysql:
  #   image: mysql:5.7
  #   container_name: yii-mysql
  #   environment:
  #     MYSQL_ROOT_PASSWORD: Sagar@194
  #     MYSQL_DATABASE: ticketdb
  #     MYSQL_USER: yii_user
  #     MYSQL_PASSWORD: yii_pass
  #   ports:
  #     - "3307:3306"
  #   volumes:
  #     - mysql_data:/var/lib/mysql
  #   networks:
  #     - yii-network
  #   restart: unless-stopped

  # Optional: PHPMyAdmin for database management
  # phpmyadmin:
  #   image: phpmyadmin/phpmyadmin
  #   container_name: yii-phpmyadmin
  #   depends_on:
  #     - mysql
  #   environment:
  #     PMA_HOST: mysql
  #     PMA_PORT: 3306
  #     PMA_ARBITRARY: 1
  #   ports:
  #     - "8081:80"
  #   networks:
  #     - yii-network
  #   restart: unless-stopped

networks:
  yii-network:
    driver: bridge

# Uncomment if using MySQL in Docker
# volumes:
#   mysql_data:






# services:
#   web:
#     build:
#       context: .
#       dockerfile: Dockerfile
#     container_name: yii-app
#     ports:
#       - "8080:80"
#     volumes:
#       - /c/xampp/htdocs/myapp2:/var/www/html
#       - /c/xampp/htdocs/yii-1.1.18.018a89:/var/www/yii
#     environment:
#       APP_ENV: dev
#       YII_DEBUG: "true"
#       YII_TRACE_LEVEL: "3"
#       PHP_TIMEZONE: Asia/Kolkata

#       DB_HOST: host.docker.internal
#       DB_NAME: ticketdb
#       DB_USER: root
#       DB_PASS: Sagar@194

#       JWT_SECRET: your-super-secret-jwt-key
#     extra_hosts:
#       - "host.docker.internal:host-gateway"
#     restart: unless-stopped
#     networks:
#       - yii-network

# networks:
#   yii-network:
#     driver: bridge
